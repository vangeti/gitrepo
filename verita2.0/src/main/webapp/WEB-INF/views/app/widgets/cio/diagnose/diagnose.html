
	<div class="row">
		<div class="container">
			<div class="row">
				<div class="2u chart-wrapper">
					<div class="chart-title">  
						Total Bug Count: <strong> <span id="total-bugs"></span> </strong> 
					</div>					
				</div>
				<div class="2u chart-wrapper">
						<span>
							<a href="javascript:dc.filterAll();dc.redrawAll();">
								<button>Reset All Filters</button>
							</a>
						</span>
				</div>
			</div>
		
			<div class="row">
				<div id="sev_chart"></div>
				<div id="app_chart"></div>
			</div>	
			</div>
			</div>	
		

<script type="text/javascript" src="views/lib/crossfilter.js"></script>
<script type="text/javascript" src="views/lib/dc-latest.js"></script>
<script src='views/lib/dcJS/d3.js' type='text/javascript'></script>
<script type="text/javascript">
  d3.json('views/lib/testing_data.json', function(error, bugs) {
  //console.log(bugs.defects);
      if(error)
          throw new Error(error);

		var ndx = crossfilter(bugs.defects);

		var severityDimension = ndx.dimension(function(d) {	return d.Severity; });
		var appDimension = ndx.dimension(function(d) {	return d.Application_Name; });

		var bugsBySeverity = severityDimension.group(); 
		var bugsByApp = appDimension.group();
	
		var severityGroup   = severityDimension.group();
		var appGroup   = appDimension.group();

		var all = ndx.groupAll();

		var totalBugsSeverity = severityDimension.group().reduceSum(function(d) {
			return d.Severity;
		});

		var totalBugsApp = appDimension.group().reduceSum(function(d) {
			return d.Application_Name;
		});
		
		var sevChart = dc.barChart('#sev_chart');
		var appChart = dc.barChart('#app_chart');
		var totalBugs = dc.numberDisplay("#total-bugs");

		totalBugs
			.formatNumber(d3.format("d"))
			.valueAccessor(function(d){return d; })
			.group(all);
				
		sevChart
			.width(468).height(380)
			.transitionDuration(1000).clipPadding(10)	
			//.brushOn(false)
			.xAxisLabel('Severity Level').yAxisLabel('Bug Count')

			.dimension(severityDimension)
			.group(severityGroup)
			//.group(totalBugsSeverity)
			.elasticX(true)
			.elasticY(true)
			.centerBar(false)
			.x(d3.scale.ordinal().domain(severityDimension))
			.xUnits(dc.units.ordinal)
			.renderHorizontalGridLines(true)
			.renderVerticalGridLines(true)
			.gap(10)
			.barPadding(0.1)
			.outerPadding(0.1)
			.renderLabel(true)
			.xAxis();	

		appChart
			.width(468).height(380)
			.transitionDuration(1000).clipPadding(10)	
			//.brushOn(false)
			.xAxisLabel('App').yAxisLabel('Bug Count')
			.dimension(appDimension)
			.group(appGroup)
			//.group(totalBugsApp)
			.elasticX(true)
			.elasticY(true)
			.centerBar(false)
			.x(d3.scale.ordinal().domain(appDimension))
			.xUnits(dc.units.ordinal)
			.renderHorizontalGridLines(true)
			.renderVerticalGridLines(true)
			.gap(10)
			.barPadding(0.1)
			.outerPadding(0.1)         
			.renderLabel(true)
			.xAxis();	
			 
			dc.renderAll();

  });

</script>